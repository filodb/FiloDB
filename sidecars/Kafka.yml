schemaVersion: 2.0

# Documentation: https://docs.pie.apple.com/kafka/dev-and-ci/sidecars.html
# PIE Kafka Repo: https://github.pie.apple.com/pie/kafka-tools

# IMPORTANT - change <pie-kafka-version> below to the version you want - see
# available versions list: https://artifacts.apple.com/docker-apple/pie-queue/kafka-broker/
# Each client version has an associated sidecar version

image: docker://docker.apple.com/pie-queue/kafka-broker:<pie-kafka-version>
host: PIE_KAFKA_HOST
ports:
  - name: ZK_PORT
    default: 2181
  - name: KAFKA_PORT
    default: 9092
  - name: KAFKA_SSL_PORT
    default: 9091
commands:
  - KAFKA_ADVERTISED_HOST_NAME=$PIE_KAFKA_HOST /app/sidecar/start-all.sh